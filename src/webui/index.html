<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>msearch - 多模态检索系统</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <nav class="navbar">
        <div class="navbar-brand">msearch</div>
        <div class="navbar-menu">
            <a href="#" class="nav-link active" data-page="search">搜索</a>
            <a href="#" class="nav-link" data-page="tasks">任务</a>
            <a href="#" class="nav-link" data-page="files">文件</a>
            <a href="#" class="nav-link" data-page="system">系统</a>
        </div>
    </nav>

    <main class="container">
        <!-- 搜索页面 -->
        <section id="page-search" class="page active">
            <div class="search-container">
                <h1>多模态检索</h1>
                <div class="search-controls">
                    <select id="search-type" class="search-select">
                        <option value="text">📝 文本搜索</option>
                        <option value="image">🖼️ 图像搜索</option>
                        <option value="audio">🎵 音频搜索</option>
                    </select>
                    <div id="search-input-container">
                        <input type="text" id="search-input-text" class="search-input-text" placeholder="描述你想找的内容...">
                        <input type="file" id="search-input-file" class="search-input-file" accept="image/*,audio/*" style="display: none;">
                    </div>
                    <button id="search-btn" class="search-btn">🔍 搜索</button>
                </div>
                <div class="search-advanced">
                    <div class="control-group">
                        <label for="top-k-slider">返回结果数: <span id="top-k-value">10</span></label>
                        <input type="range" id="top-k-slider" min="1" max="50" value="10" class="slider">
                    </div>
                    <div class="control-group">
                        <label for="threshold-slider">相似度阈值: <span id="threshold-value">0.0</span></label>
                        <input type="range" id="threshold-slider" min="0.0" max="1.0" step="0.05" value="0.0" class="slider">
                    </div>
                </div>
                <div class="results-container">
                    <div id="search-results" class="results-grid"></div>
                </div>
            </div>
        </section>

        <!-- 任务管理页面 -->
        <section id="page-tasks" class="page">
            <h2>任务管理</h2>
            <div class="task-controls">
                <div class="task-filter">
                    <label>状态过滤:</label>
                    <select id="task-status-filter" multiple class="filter-select">
                        <option value="pending" selected>待处理</option>
                        <option value="running" selected>运行中</option>
                        <option value="paused" selected>已暂停</option>
                        <option value="completed" selected>已完成</option>
                        <option value="failed" selected>失败</option>
                        <option value="cancelled" selected>已取消</option>
                    </select>
                </div>
                <div class="task-filter">
                    <label>优先级过滤:</label>
                    <select id="task-priority-filter" multiple class="filter-select">
                        <option value="high" selected>高(1-3)</option>
                        <option value="medium" selected>中(4-7)</option>
                        <option value="low" selected>低(8-10)</option>
                    </select>
                </div>
                <div class="task-sort">
                    <label>排序方式:</label>
                    <select id="task-sort-by" class="sort-select">
                        <option value="created_desc">创建时间(降序)</option>
                        <option value="created_asc">创建时间(升序)</option>
                        <option value="priority_desc">优先级(降序)</option>
                        <option value="priority_asc">优先级(升序)</option>
                        <option value="status">状态</option>
                        <option value="progress_desc">进度(降序)</option>
                    </select>
                </div>
                <button id="refresh-tasks-btn" class="refresh-btn">🔄 刷新</button>
            </div>
            <div class="task-stats">
                <div class="stat-item">
                    <div class="stat-value" id="stat-total">0</div>
                    <div class="stat-label">总任务</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="stat-pending">0</div>
                    <div class="stat-label">待处理</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="stat-running">0</div>
                    <div class="stat-label">运行中</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="stat-completed">0</div>
                    <div class="stat-label">已完成</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="stat-failed">0</div>
                    <div class="stat-label">失败</div>
                </div>
            </div>
            <div id="task-list" class="task-list"></div>
        </section>

        <!-- 文件管理页面 -->
        <section id="page-files" class="page">
            <h2>文件管理</h2>
            <div id="file-list" class="file-list"></div>
        </section>

        <!-- 系统状态页面 -->
        <section id="page-system" class="page">
            <h2>系统状态</h2>
            <div class="system-controls">
                <button id="refresh-system-btn" class="refresh-btn">🔄 刷新</button>
            </div>
            <div class="system-section">
                <h3>💻 资源使用</h3>
                <div class="resource-cards">
                    <div class="resource-card">
                        <div class="resource-icon">📊</div>
                        <div class="resource-info">
                            <div class="resource-label">CPU使用率</div>
                            <div class="resource-value" id="cpu-usage">0%</div>
                            <div class="resource-bar">
                                <div class="resource-progress" id="cpu-progress" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>
                    <div class="resource-card">
                        <div class="resource-icon">🧠</div>
                        <div class="resource-info">
                            <div class="resource-label">内存使用</div>
                            <div class="resource-value" id="memory-usage">0%</div>
                            <div class="resource-bar">
                                <div class="resource-progress" id="memory-progress" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>
                    <div class="resource-card">
                        <div class="resource-icon">🎮</div>
                        <div class="resource-info">
                            <div class="resource-label">GPU使用</div>
                            <div class="resource-value" id="gpu-usage">0%</div>
                            <div class="resource-bar">
                                <div class="resource-progress" id="gpu-progress" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="system-section">
                <h3>📦 数据库状态</h3>
                <div class="database-cards">
                    <div class="database-card">
                        <div class="database-label">向量数量</div>
                        <div class="database-value" id="vector-count">0</div>
                    </div>
                    <div class="database-card">
                        <div class="database-label">文件数量</div>
                        <div class="database-value" id="file-count">0</div>
                    </div>
                    <div class="database-card">
                        <div class="database-label">向量维度</div>
                        <div class="database-value" id="vector-dimension">512</div>
                    </div>
                    <div class="database-card">
                        <div class="database-label">索引类型</div>
                        <div class="database-value" id="index-type">ivf_pq</div>
                    </div>
                </div>
            </div>
            <div class="system-section">
                <h3>⚡ 任务统计</h3>
                <div class="task-stats-cards">
                    <div class="task-stat-card">
                        <div class="task-stat-label">成功率</div>
                        <div class="task-stat-value" id="success-rate">0%</div>
                    </div>
                    <div class="task-stat-card">
                        <div class="task-stat-label">平均耗时</div>
                        <div class="task-stat-value" id="avg-duration">0s</div>
                    </div>
                    <div class="task-stat-card">
                        <div class="task-stat-label">吞吐量</div>
                        <div class="task-stat-value" id="throughput">0/min</div>
                    </div>
                    <div class="task-stat-card">
                        <div class="task-stat-label">队列深度</div>
                        <div class="task-stat-value" id="queue-depth">0</div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <div id="loading-overlay" class="loading-overlay hidden">
        <div class="spinner"></div>
        <p>加载中...</p>
    </div>

    <div id="toast" class="toast hidden"></div>

    <script src="app.js"></script>
</body>
</html>

# =====================================
# msearch 多模态检索系统 - 完整依赖清单
# 更新时间: 2025-10-20
# 基于深度代码分析和最佳实践生成
# =====================================

# =====================================
# 🚀 安装说明
# =====================================
# 标准安装:
#   pip install -r requirements_comprehensive.txt
#
# 国内镜像加速:
#   pip install -r requirements_comprehensive.txt -i https://pypi.tuna.tsinghua.edu.cn/simple
#
# GPU版本 (推荐):
#   pip install torch torchvision --index-url https://download.pytorch.org/whl/cu118
#   pip install -r requirements_comprehensive.txt
#
# 开发环境:
#   pip install -r requirements_comprehensive.txt
#   pip install -e .  # 开发模式安装

# =====================================
# 🔥 核心深度学习框架
# =====================================
torch>=2.1.0                    # PyTorch深度学习框架 (性能提升20%+)
torchvision>=0.16.0             # PyTorch视觉库 (匹配torch版本)
transformers>=4.35.0            # Hugging Face Transformers (新模型支持)
numpy>=1.24.0                   # 科学计算基础库
pandas>=2.0.0                   # 数据处理库

# =====================================
# 🌐 Web框架和API服务
# =====================================
fastapi>=0.104.0                # Web API框架 (安全修复)
uvicorn>=0.23.0                 # ASGI服务器
pydantic>=2.5.0                 # 数据验证库 (稳定性提升)
starlette>=0.27.0               # FastAPI核心依赖
httpx>=0.25.0                   # 异步HTTP客户端
requests>=2.31.0                # 同步HTTP客户端 (安全修复)
aiohttp>=3.8.0                  # 异步HTTP客户端
aiofiles>=23.0.0                # 异步文件操作 (文件上传必需)
python-multipart>=0.0.6         # 文件上传支持 (FastAPI必需)

# =====================================
# 💾 数据库和存储
# =====================================
sqlalchemy>=2.0.0               # SQL ORM框架
qdrant-client>=1.6.0            # Qdrant向量数据库客户端

# =====================================
# 🖼️ 媒体处理和计算机视觉
# =====================================
pillow>=10.1.0                  # PIL图像处理 (安全修复)
opencv-python>=4.8.0            # OpenCV计算机视觉 (cv2)
librosa>=0.10.0                 # 音频处理库
soundfile>=0.12.0               # 音频文件I/O
pydub>=0.25.0                   # 音频格式转换
ffmpeg-python>=0.2.0            # FFmpeg Python绑定 (视频处理)
scikit-image>=0.21.0            # 高级图像处理

# =====================================
# 🔬 科学计算和机器学习
# =====================================
scipy>=1.10.0                   # 科学计算库
scikit-learn>=1.3.0             # 机器学习库

# =====================================
# 🧠 AI模型和嵌入引擎
# =====================================
openai-whisper>=20230314        # 语音识别模型
inaspeechsegmenter>=0.0.9       # 音频内容分类器
facenet-pytorch>=2.5.0          # 人脸识别模型
mtcnn>=0.1.1                    # 人脸检测器
insightface>=0.7.0              # 增强人脸分析
infinity-emb>=0.0.20            # 向量嵌入引擎
sentence-transformers>=2.2.0    # 多语言文本嵌入

# =====================================
# 🖥️ GUI桌面应用框架
# =====================================
PySide6>=6.0.0                  # Qt桌面应用GUI框架

# =====================================
# 🔧 系统工具和监控
# =====================================
watchdog>=3.0.0                 # 文件系统监控
psutil>=5.9.0                   # 系统资源监控
tqdm>=4.65.0                    # 进度条显示
colorama>=0.4.0                 # 彩色终端输出
pyyaml>=6.0.1                   # YAML配置解析 (安全修复)
python-dotenv>=1.0.0            # 环境变量管理
chardet>=5.0.0                  # 字符编码检测
python-magic>=0.4.0             # 文件类型检测

# =====================================
# 🧪 开发和测试工具
# =====================================
pytest>=7.0.0                   # 单元测试框架
pytest-asyncio>=0.21.0          # 异步测试支持
pytest-cov>=4.0.0               # 测试覆盖率

# =====================================
# 📊 性能监控和优化 (可选)
# =====================================
# py-spy>=0.3.0                 # Python性能分析
# memory-profiler>=0.61.0       # 内存使用分析
# rich>=13.6.0                  # 富文本终端输出

# =====================================
# 📡 错误追踪和日志 (可选)
# =====================================
# sentry-sdk>=1.38.0            # 错误追踪 (生产环境推荐)

# =====================================
# 🔗 间接依赖 (自动安装)
# =====================================
# 以下库会被上述依赖自动安装，列出供参考:
# tokenizers>=0.13.0            # transformers依赖
# huggingface-hub>=0.16.0       # transformers依赖
# safetensors>=0.3.0            # transformers依赖
# resampy>=0.4.0                # librosa依赖
# samplerate>=0.1.0             # librosa依赖
# numba>=0.56.0                 # librosa依赖
# kornia>=0.6.0                 # torchvision依赖

# =====================================
# 🖥️ 平台特定依赖
# =====================================

# Windows特定依赖 (如果需要):
# windows-curses>=2.3.0         # Windows彩色终端支持

# Linux特定依赖 (如果需要):
# python3-dev                    # Ubuntu/Debian开发头文件
# build-essential               # Ubuntu/Debian构建工具

# =====================================
# ⚠️ 重要说明
# =====================================

# 1. 硬件要求:
#    - 最低: 8GB RAM, CPU支持
#    - 推荐: 16GB+ RAM, NVIDIA GPU (CUDA 11.8+)
#    - 存储: 至少10GB可用空间 (模型文件和数据库)

# 2. 系统依赖:
#    - Windows: Visual C++ Redistributable 2019+
#    - Linux: build-essential, python3-dev
#    - macOS: Xcode Command Line Tools

# 3. 网络要求:
#    - 首次运行需要网络连接下载AI模型
#    - 建议使用国内镜像源加速下载

# 4. 虚拟环境:
#    - 强烈建议使用虚拟环境避免依赖冲突
#    - 推荐使用 conda 或 venv

# 5. 性能优化:
#    - GPU环境可显著提升AI模型推理速度
#    - SSD存储可加快文件索引速度
#    - 充足内存可提高并发处理能力

# =====================================
# 🐛 常见问题解决方案
# =====================================

# PyTorch安装问题:
#   pip install torch --index-url https://download.pytorch.org/whl/cpu

# OpenCV安装问题:
#   pip install opencv-python-headless

# 音频处理库问题:
#   sudo apt-get install libsndfile1  # Ubuntu/Debian
#   brew install libsndfile          # macOS

# 人脸识别库问题:
#   pip install --upgrade pip setuptools wheel

# =====================================
# 📈 版本兼容性矩阵
# =====================================

# Python版本: 3.8+ (推荐3.9+)
# CUDA版本: 11.8+ (GPU环境)
# 操作系统: Windows 10+, Ubuntu 18.04+, macOS 10.15+